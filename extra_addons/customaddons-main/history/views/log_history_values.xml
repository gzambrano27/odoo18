<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- 🔍 Vista de búsqueda -->
        <record id="log_history_values_view_filter" model="ir.ui.view">
            <field name="name">log.history.values.filter</field>
            <field name="model">log.history.values</field>
            <field name="arch" type="xml">
                <search string="Valor(es)">
                    <group expand="0" string="Agrupar por...">
                        <filter name="grp_field_name"
                                string="Campo"
                                context="{'group_by': 'field_name'}"
                                invisible="context.get('hide_field', True)"/>
                        <filter name="grp_value"
                                string="Valor"
                                context="{'group_by': 'value'}"/>
                    </group>
                    <field name="field_name" groups="base.menu_security"/>
                    <field name="field_string"/>
                    <field name="value"/>
                </search>
            </field>
        </record>

        <!-- 📋 Vista lista -->
        <record id="log_history_values_view_tree" model="ir.ui.view">
            <field name="name">log.history.values.tree</field>
            <field name="model">log.history.values</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">
                <list string="Valor(es)"
                      create="false"
                      delete="false"
                      edit="false"
                      decoration-danger="state == 'unlinked'"
                      decoration-success="state == 'created'"
                      decoration-primary="state == 'updated'"
                      decoration-muted="state == 'set'">
                    <field name="field_name" invisible="context.get('hide_field', True)"/>
                    <field name="field_string"/>
                    <field name="value"/>
                    <field name="state" invisible="1"/>
                </list>
            </field>
        </record>

        <!-- 🧾 Vista formulario -->
        <record id="log_history_values_view_form" model="ir.ui.view">
            <field name="name">log.history.values.form</field>
            <field name="model">log.history.values</field>
            <field name="priority" eval="8"/>
            <field name="arch" type="xml">
                <form string="Valor(es)" create="false" delete="false" edit="false">
                    <sheet>
                        <group>
                            <group>
                                <field name="field_name" colspan="2" invisible="context.get('hide_field', True)"/>
                                <field name="field_string" colspan="2"/>
                            </group>
                            <group>
                                <field name="value" colspan="2"/>
                                <field name="state" invisible="1"/>
                            </group>
                        </group>

                        <separator string="Valor(es)" invisible="has_childs == False"/>
                        <field name="child_ids" invisible="has_childs == False"/>
                        <field name="has_childs" invisible="1"/>
                    </sheet>
                </form>
            </field>
        </record>

    </data>
</odoo>
