<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Definición de la categoría para las actas -->
    <record id="module_category_maintenance_actas" model="ir.module.category">
        <field name="name">Actas de Mantenimiento</field>
        <field name="sequence">20</field>
    </record>

    <!-- Definición de grupos -->
    <record id="group_maintenance_acta_user" model="res.groups">
        <field name="name">Usuario de Actas</field>
        <field name="category_id" ref="module_category_maintenance_actas"/>
    </record>

    <record id="group_maintenance_acta_manager" model="res.groups">
        <field name="name">Administrador de Actas</field>
        <field name="category_id" ref="module_category_maintenance_actas"/>
    </record>


    <record id="group_equipment_admin_general" model="res.groups">
        <field name="name">Administrador General de Equipos</field>
        <field name="category_id" ref="base.module_category_manufacturing_maintenance"/>
        <!-- Hereda permisos del grupo "Equipment Manager" -->
        <field name="implied_ids" eval="[(4, ref('maintenance.group_equipment_manager'))]"/>
        <!-- Puedes incluir usuarios predeterminados si deseas -->
        <field name="users" eval="[(4, ref('base.user_root'))]"/>
        <field name="comment">Grupo que tiene todos los permisos del responsable de equipos más otros adicionales.</field>
    </record>
    <data noupdate="1">
        <record id="rule_maintenance_equipment_creator_only" model="ir.rule">
            <field name="name">Ver solo equipos creados por el usuario</field>
            <field name="model_id" ref="maintenance.model_maintenance_equipment"/>
            <field name="domain_force">[('create_uid', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>
        <record id="rule_maintenance_equipment_admin_general" model="ir.rule">
            <field name="name">Administrador general puede ver todos los equipos</field>
            <field name="model_id" ref="maintenance.model_maintenance_equipment"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('maintenance_add_actas.group_equipment_admin_general'))]"/>
        </record>
    </data>
</odoo>
