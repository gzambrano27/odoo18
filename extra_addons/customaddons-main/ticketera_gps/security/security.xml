<odoo>
    <data noupdate="0">

        <!-- Categoría Tickets -->
        <record id="module_category_tickets" model="ir.module.category">
            <field name="name">Tickets</field>
            <field name="description">Categoría para ticket.gps</field>
            <field name="sequence">60</field>
        </record>

        <!-- Grupo Usuario Tickets -->
        <record id="group_usuario_tickets" model="res.groups">
            <field name="name">Usuario de Tickets</field>
            <field name="category_id" ref="module_category_tickets"/>
        </record>

        <!-- Grupo Admin Tickets -->
        <record id="group_admin_tickets" model="res.groups">
            <field name="name">Administrador de Tickets</field>
            <field name="category_id" ref="module_category_tickets"/>
        </record>

        <!-- REGLA: ver solo (propios o encargado) -->
        <record id="ticket_rule_user" model="ir.rule">
            <field name="name">Regla Tickets GPS (user)</field>
            <field name="model_id" ref="model_ticket_gps"/>
            <field name="domain_force">
                 ["|","|",("creator_id","=",user.id),("encargado.user_id","=",user.id),("cc.user_id","=",user.id)]
            </field>
            <field name="groups" eval="[(4, ref('ticketera_gps.group_usuario_tickets'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- REGLA: Admin => acceso total -->
        <record id="ticket_rule_admin" model="ir.rule">
            <field name="name">Tickets - ver todos (Admin)</field>
            <field name="model_id" ref="model_ticket_gps"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4, ref('ticketera_gps.group_admin_tickets'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- PERMISOS (ir.model.access) -->
        <record id="access_ticket_usuario" model="ir.model.access">
            <field name="name">Usuario - ticket.gps</field>
            <field name="model_id" ref="model_ticket_gps"/>
            <field name="group_id" ref="ticketera_gps.group_usuario_tickets"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="access_ticket_admin" model="ir.model.access">
            <field name="name">Admin - ticket.gps</field>
            <field name="model_id" ref="model_ticket_gps"/>
            <field name="group_id" ref="ticketera_gps.group_admin_tickets"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

    </data>
</odoo>
